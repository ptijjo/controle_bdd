// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "sqlite"
}

generator client {
  provider = "prisma-client-js"
  output   = "../../node_modules/.prisma/client"
}

enum Role {
  controleur
  chef_service
  agent
}


model User {
  id             String   @id @default(cuid())
  email          String   @unique
  password       String
  nom            String
  prenom         String
  role           Role     @default(agent)
  createdAt      DateTime @default(now())
   failedLoginAttempts    Int        @default(0)
   lockedUntil            DateTime?
  updatedAt      DateTime @updatedAt
  
//Relations
  LoginAttempts LoginAttempts[]
}

model LoginAttempts {
  id        String   @id @default(cuid())
  emailName String
  email     User     @relation(fields: [emailName], references: [email], onDelete: Cascade)
  success   Boolean
  ipAddress String
  createdAt DateTime @default(now())
}

